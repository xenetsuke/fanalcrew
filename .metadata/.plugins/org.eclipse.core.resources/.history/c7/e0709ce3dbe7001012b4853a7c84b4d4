package com.bluecollar.dto;

import java.util.Base64;
import java.util.List;

import com.bluecollar.entity.Profile;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@NoArgsConstructor
@AllArgsConstructor
public class ProfileDTO {
	 
	 private Long id; // MongoDB uses String ObjectId, not Long
		private AccountType accountType;

//	    private String userId; // Link to User collection

	    // âœ… Worker Personal Details
	 private String picture ;
	    private String fullName;
	    private Integer age; // 18 - 65
	    private String gender; // MALE / FEMALE / OTHER

	    private String primaryPhone;
	    private String alternatePhone;
	    private String whatsappNumber;

	    private String email;
	    private String currentCity;
	    private String currentState;

	    private String currentAddress;
	    private String pincode;
	    private List<String> skills;
	    private List<String> languages; // Hindi, English, Tamil etc.
//	    private List<String> experience;
	
	    // ðŸ”¹ PROFESSIONAL INFORMATION
	    // ===============================
	    private String primaryJobRole;
	    private String skillLevel;

	    private Integer totalExperience;

	    private List<String> secondarySkills;
	    private String shiftPreference;

	    private String workType;           // Fixed typo
	    private Boolean Workeravailability = true; // default

	    private List<String> availability;

	    private String wageType;           // Fixed typo (wagetype)
	    private Integer wageAmount;

	    private Boolean wageNegotiable;
	    // WORK HISTORY (NEW)
	    // -------------------------
	    private WorkHistoryStatistics statistics;       // totals
	    private List<AssignmentDTO> recentAssignments;     // cards list
	    private List<Long> savedJobs ;
	    
	    // ðŸ”¹ EMPLOYER / COMPANY INFORMATION  âœ… NEW
	    // ===============================
	    private String companyName;
	    private String gstNumber;
	    private String industryType;

	    private String contactPersonName;
	    private String officialEmail;

	    private String locationName;
	    private String address;
	    private String city;
	    private String Companywebsite;

	    private String companyPincode;

	    private Double latitude;
	    private Double longitude;

	    private Boolean isEmployerProfile;

	 // ===============================
	 // ðŸ”¹ DOCUMENT VERIFICATION (KYC)
	 // ===============================

	 private AadhaarDocument aadhaar;
	 private PanDocument pan;
	 private BankDetails bankDetails;
	 private List<AdditionalDocument> additionalDocs;

	 // Overall KYC status
	 private String kycStatus; // NOT_STARTED | IN_PROGRESS | VERIFIED | REJECTED


	    
	    public Profile toEntity() {
	        return new Profile(
	            this.id,
	            this.accountType,
	            this.picture!=null?Base64.getDecoder().decode(this.picture):null,
	            this.fullName,
	            this.age,
	            this.gender,
	            this.primaryPhone,
	            this.alternatePhone,
	            this.whatsappNumber,
	            this.email,
	            this.currentCity,
	            this.currentState,
	            this.currentAddress,
	            this.pincode,
	            this.skills,
	            this.languages,
	            this.primaryJobRole,
	            this.skillLevel,
	            this.totalExperience,
	            this.secondarySkills,
	            this.shiftPreference,
	            this.workType,
	            this.Workeravailability,
	            this.availability,
	            this.wageType,
	            this.wageAmount,
	            this.wageNegotiable,
	            this.statistics,
	            this.recentAssignments,
	            this.savedJobs,
	            // Employer
	            this.companyName,
	            this.gstNumber,
	            this.industryType,
	            this.contactPersonName,
	            this.officialEmail,
	            this.locationName,
	            this.address,
	            this.city,
	            this.Companywebsite,
	            this.companyPincode,      // or companyPincode
	            this.latitude,
	            this.longitude,
	            this.isEmployerProfile,
	         // ðŸ”¹ DOCUMENT VERIFICATION (KYC)
	         // ===============================
	            this.aadhaar,         // returns AadhaarDocument object directly
	            this.pan,             // returns PanDocument object directly
	            this.bankDetails,     // returns BankDetails object directly
	            this.additionalDocs,  // returns List<AdditionalDocument> directly
	            this.kycStatus
	            );
	       
	    }


}
